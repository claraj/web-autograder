webpackJsonp([1],{"1/oy":function(e,t){},"6X1i":function(e,t){},"9M+g":function(e,t){},AdKc:function(e,t){},GfHa:function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=r("VU/8")({name:"App"},n,!1,function(e){r("Uh3+")},null,null).exports,a=r("/ocq"),c=r("mvHQ"),i=r.n(c),f=r("mtWM"),d=r.n(f);var h=new function e(){var t=this;this.base="/api/v1",this.$crud=d.a.create({baseURL:this.base,headers:{"Content-Type":"application/json"}}),e.prototype.fetchAll=function(){return t.$crud.get("/coffeeshop/",{params:{sort:"name"}}).then(function(e){return e.data})},e.prototype.updateStars=function(e,r){return t.$crud.patch("/coffeeshop/"+e,{stars:r})},e.prototype.addNew=function(e){return t.$crud.post("/coffeeshop",e).then(function(e){return e.data})}},p={name:"Stars",props:{stars:Number,_id:String},data:function(){return{starsSet:this.stars}},watch:{stars:function(){console.log("hey stars changed"),this.starsSet=this.stars}},methods:{onStarsChanged:function(){this.$emit("onStarsChanged",this._id,Number(this.starsSet))}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"star-"+e._id}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.starsSet,expression:"starsSet"}],staticClass:"star-range-slider",attrs:{type:"range",min:"1",max:"5"},domProps:{value:e.starsSet},on:{input:e.onStarsChanged,__r:function(t){e.starsSet=t.target.value}}}),e._v(" "),r("span",{staticClass:"star-text-display"},[r("span",{staticClass:"star-value"},[e._v(e._s(e.starsSet))]),e._v(" "),1==e.starsSet?r("span",[e._v("star")]):r("span",[e._v("stars")])])])},staticRenderFns:[]};var l=r("VU/8")(p,u,!1,function(e){r("AdKc")},"data-v-8f0bc88a",null).exports,v={name:"CoffeeShops",components:{Stars:l},props:{coffeeShops:Array,errors:Object},methods:{onStarsChanged:function(e,t){this.$emit("onStarsChanged",e,t)}}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Coffee Shop Ratings")]),e._v(" "),e.errors.fetchAll?r("div",{attrs:{id:"errors-fetch"}},[e._v(e._s(e.errors.fetchAll))]):e._e(),e._v(" "),e.errors.changeStars?r("div",{attrs:{id:"errors-change-stars"}},[e._v(e._s(e.errors.changeStars))]):e._e(),e._v(" "),e.coffeeShops.length?r("div",[r("p",[e._v("Change star rating by clicking on the stars for a coffee shop")]),e._v(" "),e.errors.fetchAll?r("p",{staticClass:"error"},[e._v(e._s(e.errors.fetchAll))]):e._e(),e._v(" "),e.errors.changeStars?r("p",{staticClass:"error"},[e._v(e._s(e.errors.changeStars))]):e._e(),e._v(" "),r("ul",{attrs:{id:"coffee-shop-list"}},e._l(e.coffeeShops,function(t){return r("li",{key:t._id,attrs:{id:"shop-"+t._id}},[e._v("\n\n        "+e._s(t.name)+", "+e._s(t.stars)+" "),1==t.stars?r("span",[e._v("star")]):r("span",[e._v("stars")]),e._v(" "),r("Stars",{attrs:{stars:t.stars,_id:t._id},on:{onStarsChanged:e.onStarsChanged}})],1)}))]):r("div",{attrs:{id:"no-shops"}},[e._v("No Coffee Shops. Try adding some!")])])},staticRenderFns:[]};var m=r("VU/8")(v,_,!1,function(e){r("oa1f")},"data-v-74eed56c",null).exports,S={name:"NewCoffeeShop",components:{Stars:l},props:{errors:Object},data:function(){return{name:"",stars:1,formErrors:""}},methods:{onStarsChanged:function(e,t){this.stars=t},addNewCoffeeShop:function(){this.name?(this.$emit("onAddNew",{name:this.name,stars:this.stars}),this.name="",this.stars=1):this.formErrors="You must enter a name."}}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h2",[e._v("Add new Coffee Shop")]),e._v(" "),r("b-form",[r("b-form-input",{attrs:{label:"Name",placeholder:"Name",id:"new-name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("span",[e._v("How many stars?")]),e._v(" "),r("Stars",{attrs:{stars:e.stars},on:{onStarsChanged:e.onStarsChanged}}),e._v(" "),e.errors.addNew?r("p",{attrs:{id:"add-errors"}},[e._v(e._s(e.errors.addNew))]):e._e(),e._v(" "),e.formErrors?r("p",{attrs:{id:"form-errors"}},[e._v(e._s(e.formErrors))]):e._e(),e._v(" "),r("b-button",{attrs:{id:"add-new-button"},on:{click:e.addNewCoffeeShop}},[e._v("Add")])],1)],1)},staticRenderFns:[]},C={name:"CoffeeShops",components:{AddCoffeeShop:r("VU/8")(S,g,!1,null,null,null).exports,CoffeeShopList:m},data:function(){return{coffeeShops:[],errors:{fetchAll:"",changeStars:"",addNew:""}}},mounted:function(){this.errors={fetchAll:"",changeStars:"",addNew:""},this.fetchShops()},methods:{fetchShops:function(){var e=this;h.fetchAll().then(function(t){console.log("COFFEE SHOPS ARE",t),e.coffeeShops=t,e.coffeeShops.forEach(function(t){t.stars||(t.stars=0),e.errors.fetchAll=""})}).catch(function(t){e.errors.fetchAll="Error fetching coffee shops",console.log("Error fetching coffee shops",t,e.errors)})},onStarsChanged:function(e,t){var r=this;h.updateStars(e,t).then(function(s){console.log("updated stars for "+e+" to "+t,s),r.errors.changeStars="",r.fetchShops()}).catch(function(s){r.errors.changeStars="Error changing stars",console.log("Error changing stars to "+t+" for id "+e+" ",s,r.errors)})},onAddNew:function(e){var t=this;h.addNew(e).then(function(e){console.log("added new.",e),t.errors.addNew="",t.fetchShops()}).catch(function(r){t.errors.addNew="Error adding new coffee shop",console.log("Error adding new shop with data "+i()(e)+" ",r,t.errors)})}}},w={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Coffee Shops")]),e._v(" "),s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",[s("AddCoffeeShop",{attrs:{errors:e.errors},on:{onAddNew:e.onAddNew}}),e._v(" "),s("img",{attrs:{src:r("nUHV")}})],1),e._v(" "),s("b-col",[s("CoffeeShopList",{attrs:{coffeeShops:e.coffeeShops,errors:e.errors},on:{onStarsChanged:e.onStarsChanged}})],1)],1)],1)],1)},staticRenderFns:[]};var A=r("VU/8")(C,w,!1,function(e){r("6X1i")},"data-v-554e3bc2",null).exports;s.a.use(a.a);var b=new a.a({routes:[{path:"/",name:"CoffeeShops",component:A}]}),N=r("e6fC");r("Jmt5"),r("9M+g");s.a.use(N.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:b,components:{App:o},template:"<App/>"})},"Uh3+":function(e,t){},nUHV:function(e,t,r){e.exports=r.p+"static/img/coffee.762a5dd.jpg"},oa1f:function(e,t){},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8846ae9d74359856d22b.js.map